#  概念设计说明书

------

# **1. 概念设计目标**

概念设计旨在通过 E-R 模型准确表达系统中的实体、属性以及实体间的关系，为后续逻辑设计（MySQL 结构设计）建立清晰基础。

本系统的数据范围包括：

- 书目与库存管理
- 客户管理
- 订单与发货
- 缺书记录与采购
- 供应商管理

------

# **2. 业务对象分析（Business Object Identification）**

根据需求，系统中涉及的主要业务对象如下：

| 业务对象                   | 是否实体       | 说明                     |
| -------------------------- | -------------- | ------------------------ |
| 书目（Book）               | 是             | 系统核心实体             |
| 作者（Author）             | 是             | 多个作者按序排列         |
| 关键字（Keyword）          | 是             | 一个书可有多个关键字     |
| 供应商（Supplier）         | 是             | 多供应商供应同一本书     |
| 客户（Customer）           | 是             | 网站用户，具有信用等级   |
| 订单（Order）              | 是             | 一个订单可包含多种书     |
| 订单明细（OrderItem）      | 是（联系实体） | 表示订单与书的多对多关系 |
| 发货记录（Shipment）       | 是             | 支持部分发货             |
| 缺书记录（ShortageRecord） | 是             | 三种来源：人工/自动/客户 |
| 采购单（PurchaseOrder）    | 是             | 由缺书记录生成           |
| 采购明细（PurchaseItem）   | 是（联系实体） | 采购单与书的多对多       |

------

# **3. 实体定义与属性说明**

以下每个实体均包含：

- 主键（PK）
- 外键（FK）
- 单值/复合/可选属性标注
- 备注（符合 E-R 语义）

------

## **3.1 Book（书目）**

**说明：核心实体；部分属性需要拆分为关系，如作者和关键字。**

| 属性          | 说明             |
| ------------- | ---------------- |
| BookID (PK)   | 书号             |
| Title         | 书名             |
| Publisher     | 出版社           |
| Price         | 售价             |
| Catalog       | 内容目录（可选） |
| CoverImage    | 封面（可选）     |
| StockQuantity | 库存量           |
| SeriesID      | 丛书编号（可选） |
| Location      | 库存位置         |

------

## **3.2 Author（作者）**

| 属性          | 说明     |
| ------------- | -------- |
| AuthorID (PK) | 作者编号 |
| Name          | 作者姓名 |

------

## **3.3 BookAuthor（弱实体 / 联系实体）**

**说明：为表达 Book 与 Author 的多对多关系，同时记录作者排序（1–4）。**

| 属性          | 说明                               |
| ------------- | ---------------------------------- |
| BookID (FK)   | 所属书目                           |
| AuthorID (FK) | 作者                               |
| AuthorOrder   | 作者顺序（1~4） → 复合主键的一部分 |

------

## **3.4 Keyword（关键字）**

| 属性           | 说明       |
| -------------- | ---------- |
| KeywordID (PK) | 关键字编号 |
| Word           | 关键字文本 |

------

## **3.5 BookKeyword（联系实体）**

| 属性           | 说明   |
| -------------- | ------ |
| BookID (FK)    | 书     |
| KeywordID (FK) | 关键字 |

------

## **3.6 Supplier（供应商）**

| 属性            | 说明       |
| --------------- | ---------- |
| SupplierID (PK) | 供应商编号 |
| Name            | 名称       |
| Address         | 地址       |
| Phone           | 电话       |

------

## **3.7 BookSupplier（多对多联系）**

| 属性        | 说明          |
| ----------- | ------------- |
| BookID      | FK 指向书     |
| SupplierID  | FK 指向供应商 |
| SupplyPrice | 供应价格      |

------

## **3.8 Customer（客户）**

| 属性            | 说明                   |
| --------------- | ---------------------- |
| CustomerID (PK) | 用户编号               |
| Password        | 登录密码               |
| Name            | 姓名                   |
| Address         | 地址                   |
| Balance         | 账户余额               |
| CreditLevel     | 信用等级（1~5）        |
| MonthlyLimit    | 透支额度（等级 3/4/5） |

------

## **3.9 Orders（订单）**

| 属性            | 说明                       |
| --------------- | -------------------------- |
| OrderID (PK)    | 订单号                     |
| CustomerID (FK) | 客户编号                   |
| OrderDate       | 下单日期                   |
| ShippingAddress | 收货地址                   |
| Status          | 状态（待发货/部分发/已发） |

------

## **3.10 OrderItem（订单明细）**

| 属性         | 说明           |
| ------------ | -------------- |
| OrderID (FK) | 所属订单       |
| BookID (FK)  | 订购书目       |
| Quantity     | 数量           |
| Amount       | 金额（含折扣） |

------

## **3.11 Shipment（发货记录）**

| 属性            | 说明         |
| --------------- | ------------ |
| ShipmentID (PK) | 发货流水编号 |
| OrderID (FK)    | 对应订单     |
| BookID (FK)     | 对应书目     |
| Quantity        | 发货数量     |
| ShipDate        | 发货时间     |

------

## **3.12 ShortageRecord（缺书记录）**

| 属性                  | 说明                   |
| --------------------- | ---------------------- |
| ShortageID (PK)       | 缺书记录编号           |
| BookID (FK)           | 缺书书目               |
| SupplierID (FK)       | 推荐供应商             |
| CustomerID (FK, 可选) | 客户缺书来源           |
| Quantity              | 数量                   |
| Date                  | 登记日期               |
| SourceType            | 来源（人工/自动/客户） |

------

## **3.13 PurchaseOrder（采购单）**

| 属性            | 说明                  |
| --------------- | --------------------- |
| POID (PK)       | 采购单号              |
| SupplierID (FK) | 供应商                |
| CreateDate      | 创建日期              |
| Status          | 状态（已创建/已到货） |

------

## **3.14 PurchaseItem（采购单明细）**

| 属性        | 说明   |
| ----------- | ------ |
| POID (FK)   | 采购单 |
| BookID (FK) | 书目   |
| Quantity    | 数量   |

------

# **4. 实体之间关系（Relationship）**

以下为本系统概念模型的所有关系说明（最完整关系表）：

| 关系                         | 类型   | 基数 | 描述                         |
| ---------------------------- | ------ | ---- | ---------------------------- |
| Book – Author                | 多对多 | M:N  | 一本书多个作者；作者可著多书 |
| Book – Keyword               | 多对多 | M:N  | 一本书多个关键字             |
| Book – Supplier              | 多对多 | M:N  | 一本书可由多个供应商供货     |
| Customer – Orders            | 一对多 | 1:N  | 一个客户可有多个订单         |
| Orders – OrderItem           | 一对多 | 1:N  | 一个订单含多行明细           |
| Book – OrderItem             | 一对多 | 1:N  | 一本书可出现在多条订单项里   |
| OrderItem – Shipment         | 一对多 | 1:N  | 一条订单项可分批发货         |
| Book – ShortageRecord        | 一对多 | 1:N  | 一本书可能产生多个缺书记录   |
| Supplier – ShortageRecord    | 一对多 | 1:N  | 缺书记录关联推荐供应商       |
| PurchaseOrder – PurchaseItem | 1:N    | 1:N  | 一张采购单可以包含多种书     |
| Book – PurchaseItem          | 1:N    | 1:N  | 一本书出现在多条采购明细中   |

------

# **5. 最终 E-R 图**

![数据流图-2025-12-18-124122](https://cdn.jsdelivr.net/gh/Hydralune/Hydralunepicgo@main/img/%E6%95%B0%E6%8D%AE%E6%B5%81%E5%9B%BE-2025-12-18-124122.svg)
